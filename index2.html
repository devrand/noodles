<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<style>
  canvas{
    width: 100%;
    height: 100%;
  }


  .rotate-text {

position: absolute;

width: 300px;

transform: rotate(-90deg);

float: left;

top: -50px;

left: 240px;

text-align: right;

font-family: Arial;
font-size: 12px;

  }


  .rotate-text div{
    margin-bottom: 57px;

  }

</style>
</head>
<body>
<script type="text/javascript" src="js/d3.v5.min.js"></script>

<script>
var curve_it = function(lineData){ 
  var  newLineData  = [lineData[0]];
  for(var i = 1; i < lineData.length; i++  ){
    var phi = getRandomArbitrary(-Math.PI/75, Math.PI/75);
    var prev_point = lineData[i-1];
    newLineData[i] = { x: prev_point.x + length * Math.sin(phi), y: prev_point.y + length*Math.cos(phi) }
  } 

  return newLineData;
}

var noodles = [ {value: 15, name: 'Ненадійне джерело інформації'}, {value: 5, name: 'Недостовірна новина'}, 
                {value: 20, name: 'Маніпулятивний заголовок'}, {value: 7, name: 'Фейк'}, 
                {value: 5, name: 'Маніпуляції з емоціями'}, {value: 4, name: 'Мова ворожнечі'}];


function getRandomArbitrary(min, max) {
  return Math.random() * (max - min) + min;
}


  var length = 5;
  var width = 100;
  var height = 200;

//The data for our line
  var lineData = d3.range(1, 50, 5).map(function(d){ return {x:1, y:d} });


  var data = noodles.map(function(d, i){
    var lineData = d3.range(1, d.value, 5).map(function(d){ return {x:(i+1), y:d} });
    return curve_it(lineData);
  })

console.log(data)
// make line slightly curved ...



  var xScale = d3.scaleLinear()
    .domain([0, 7]) // input
    .range([0, width]); // output

  var yScale = d3.scaleLinear()
    .domain([0, 50]) // input 
    .range([0, height]); // output 


  
 //This is the accessor function we talked about above
  var lineFunction = d3.line() 
                         .x(function(d) { return xScale(d.x); })
                         .y(function(d) { return yScale(d.y); })
			 .curve(d3.curveCatmullRom.alpha(0.5));

//The SVG Container
  var svgContainer = d3.select("body").append("svg")
                                      .attr("width", 500)
                                      .attr("height", 1000);
  
//The line SVG Path we draw
  var lineGraph = svgContainer
		    .append("g")
                    .selectAll("path")
		    .data(data)
		    .enter().append("path")	
                      .attr("d", lineFunction)
                      .attr("stroke", "gold")
                      .attr("stroke-width", 7)
		      .attr("class", "line")
                      .attr("stroke-linecap", "round")
                      .attr("fill", "none");


</script>
</body>


